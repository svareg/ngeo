{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./contribs/gmf/examples/objecteditinghub.js"],"names":["module","angular","gmfEditingXSDAttributes","name","gmfObjecteditingManager","gmfThemeThemes","value","appURL","GMF_THEMES","GMF_LAYERS","constant","MainController","$http","$q","$scope","gmfThemes","gmfXSDAttributes","http_","q_","gmfThemes_","gmfXSDAttributes_","urls","url","viewerUrlDev_","viewerUrlHosted_","selectedUrl","gmfServers_","gmfServer_","gmfLayerNodes","selectedGmfLayerNode","featuresCache_","features","selectedFeature","geomTypeCache_","selectedGeomType","undefined","$watch","newVal","oldVal","getFeatures_","then","handleGetFeatures_","bind","getGeometryType_","handleGetGeometryType_","themeName","loadThemes","getOgcServersObject","ogcServers","getThemesObject","themes","i","ii","theme","length","groupNode","children","console","assert","ogcServer","gmfServer","wfsSupport","urlWfs","metadata","identifierAttributeField","push","prototype","runEditor","geomType","feature","layer","id","property","get","params","ObjecteditingParam","GEOM_TYPE","ID","LAYER","THEME","PROPERTY","appendParams","window","open","runViewerDev","runViewer_","runViewerHosted","baseUrl","node","nodeId","nodeName","nodeIdAttrFieldName","ids","join","gmfLayerNode","getFeaturesDeferred_","defer","getFeaturesFromCache_","resolve","issueGetFeatures_","promise","layers","response","olFormatWFS","readFeatures","data","getGeometryTypeDeferred_","getGeometryTypeFromCache_","issueGetAttributesRequest_","getAttributes","attributes","geomAttr","getGeometryAttribute","uri","keyParams","Object","keys","forEach","k","encodeURIComponent","qs","replace","indexOf","controller"],"mappings":";AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAiB,4BAA4B;AAC7C;AACA;AACA,0BAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAgB,uBAAuB;AACvC;;;AAGA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtJA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAOA,IAAMA,MAAM,GAAGC,8CAAO,CAACD,MAAR,CAAe,QAAf,EAAyB,CACtC,SADsC,EAEtCE,oEAAuB,CAACC,IAFc,EAGtCC,oEAAuB,CAACD,IAHc,EAItCE,2DAAc,CAACF,IAJuB,CAAzB,CAAf;AAQAH,MAAM,CAACM,KAAP,CAAa,YAAb,EAA2BC,+CAAM,CAACC,UAAlC;AACAR,MAAM,CAACM,KAAP,CAAa,cAAb,EAA6BC,+CAAM,CAACE,UAApC;AAEAT,MAAM,C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","file":"objecteditinghub.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"objecteditinghub\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([19,\"commons\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import angular from 'angular';\nimport appURL from './url.js';\nimport './objecteditinghub.css';\n\nimport gmfEditingXSDAttributes from 'gmf/editing/XSDAttributes.js';\nimport gmfObjecteditingManager, {ObjecteditingParam} from 'gmf/objectediting/Manager.js';\nimport gmfThemeThemes from 'gmf/theme/Themes.js';\nimport olFormatWFS from 'ol/format/WFS.js';\nimport {getGeometryAttribute} from 'ngeo/format/XSDAttribute.js';\n\n\n/**\n * @type {!angular.IModule}\n * @hidden\n */\nconst module = angular.module('gmfapp', [\n  'gettext',\n  gmfEditingXSDAttributes.name,\n  gmfObjecteditingManager.name,\n  gmfThemeThemes.name,\n]);\n\n\nmodule.value('gmfTreeUrl', appURL.GMF_THEMES);\nmodule.value('gmfLayersUrl', appURL.GMF_LAYERS);\n\nmodule.constant('defaultTheme', 'Demo');\nmodule.constant('angularLocaleScript', '../build/angular-locale_{{locale}}.js');\n\n\n/**\n * @param {angular.IHttpService} $http Angular $http service.\n * @param {angular.IQService} $q Angular $q service.\n * @param {!angular.IScope} $scope Angular scope.\n * @param {import(\"gmf/theme/Themes.js\").ThemesService} gmfThemes The gmf themes service.\n * @param {import(\"gmf/editing/XSDAttributes.js\").EditingXSDAttributeService} gmfXSDAttributes\n *    The gmf XSDAttributes service.\n * @constructor\n * @ngInject\n */\nfunction MainController($http, $q, $scope, gmfThemes, gmfXSDAttributes) {\n\n  /**\n   * @type {angular.IHttpService}\n   * @private\n   */\n  this.http_ = $http;\n\n  /**\n   * @type {angular.IQService}\n   * @private\n   */\n  this.q_ = $q;\n\n  /**\n   * @type {import(\"gmf/theme/Themes.js\").ThemesService}\n   * @private\n   */\n  this.gmfThemes_ = gmfThemes;\n\n  /**\n   * @type {import(\"gmf/editing/XSDAttributes.js\").EditingXSDAttributeService}\n   * @private\n   */\n  this.gmfXSDAttributes_ = gmfXSDAttributes;\n\n  /**\n   * @type {Array<Object<string, string>>} List of example and application urls that contain\n   *     ObjectEditing tools.\n   */\n  this.urls = [\n    {\n      name: 'oeedit app. (hosted)',\n      url: 'apps/oeedit/'\n    },\n    {\n      name: 'oeedit app. (dev)',\n      url: '../apps/oeedit/'\n    },\n    {\n      name: 'example',\n      url: 'objectediting.html'\n    }\n  ];\n\n  /**\n   * @type {string} OE viewer application base url when developping.\n   * @private\n   */\n  this.viewerUrlDev_ = '../apps/oeview/';\n\n  /**\n   * @type {string} OE viewer application base url when hosted.\n   * @private\n   */\n  this.viewerUrlHosted_ = 'apps/oeview/';\n\n  /**\n   * @type {Object<string, string>}\n   */\n  this.selectedUrl = this.urls[0];\n\n  /**\n   * @type {import('gmf/themes.js').GmfOgcServers} ogcServers OGC servers.\n   * @private\n   */\n  this.gmfServers_;\n\n  /**\n   * @type {import('gmf/themes.js').GmfOgcServer} ogcServer OGC server to use.\n   * @private\n   */\n  this.gmfServer_;\n\n  /**\n   * @type {Array<import('gmf/themes.js').GmfLayerWMS>}\n   */\n  this.gmfLayerNodes = [];\n\n  /**\n   * @type {?import('gmf/themes.js').GmfLayerWMS}\n   */\n  this.selectedGmfLayerNode = null;\n\n  /**\n   * @type {Object<number, Array.<import(\"ol/Feature.js\").default>>}\n   */\n  this.featuresCache_ = {};\n\n  /**\n   * @type {Array<import(\"ol/Feature.js\").default>}\n   */\n  this.features = null;\n\n  /**\n   * @type {?import(\"ol/Feature.js\").default}\n   */\n  this.selectedFeature = null;\n\n  /**\n   * @type {Object<number, string>}\n   * @private\n   */\n  this.geomTypeCache_ = {};\n\n  /**\n   * @type {string|undefined}\n   */\n  this.selectedGeomType = undefined;\n\n  $scope.$watch(\n    () => this.selectedGmfLayerNode,\n    (newVal, oldVal) => {\n      this.selectedFeature = null;\n\n      if (newVal) {\n        this.getFeatures_(newVal).then(\n          this.handleGetFeatures_.bind(this, newVal)\n        );\n        this.getGeometryType_(newVal).then(\n          this.handleGetGeometryType_.bind(this, newVal)\n        );\n      }\n    }\n  );\n\n  /**\n   * @type {string}\n   */\n  this.themeName = 'ObjectEditing';\n\n  this.gmfThemes_.loadThemes();\n\n  this.gmfThemes_.getOgcServersObject().then((ogcServers) => {\n\n    // (1) Set OGC servers\n    this.gmfServers_ = ogcServers;\n\n    this.gmfThemes_.getThemesObject().then((themes) => {\n      if (!themes) {\n        return;\n      }\n\n      let i, ii;\n\n      // (2) Find OE theme\n      /** @type {import('gmf/themes.js').GmfTheme} */\n      let theme;\n      for (i = 0, ii = themes.length; i < ii; i++) {\n        if (themes[i].name === this.themeName) {\n          theme = themes[i];\n          break;\n        }\n      }\n\n      if (!theme) {\n        return;\n      }\n\n      // (3) Get first group node\n      const groupNode = theme.children[0];\n\n      // (4) Set OGC server, which must support WFS for this example to work\n      console.assert(groupNode.ogcServer);\n      const gmfServer = this.gmfServers_[groupNode.ogcServer];\n      if (gmfServer && gmfServer.wfsSupport === true && gmfServer.urlWfs) {\n        this.gmfServer_ = gmfServer;\n      } else {\n        return;\n      }\n\n      /** @type {Array<import('gmf/themes.js').GmfLayerWMS>} */\n      const gmfLayerNodes = [];\n      for (i = 0, ii = groupNode.children.length; i < ii; i++) {\n        if (groupNode.children[i].metadata.identifierAttributeField) {\n          gmfLayerNodes.push(/** @type import('gmf/themes.js').GmfLayerWMS} */(groupNode.children[i]));\n        }\n      }\n\n      // (5) Set layer nodes\n      this.gmfLayerNodes = gmfLayerNodes;\n\n      // (6) Select 'polygon' for the purpose of simplifying the demo\n      this.selectedGmfLayerNode = this.gmfLayerNodes[1];\n\n    });\n  });\n\n}\n\n\n/**\n */\nMainController.prototype.runEditor = function() {\n\n  const geomType = this.selectedGeomType;\n  const feature = this.selectedFeature;\n  const layer = this.selectedGmfLayerNode.id;\n  const property = this.selectedGmfLayerNode.metadata.identifierAttributeField;\n  console.assert(property !== undefined);\n  const id = feature.get(property);\n\n  const params = {};\n  params[ObjecteditingParam.GEOM_TYPE] = geomType;\n  params[ObjecteditingParam.ID] = id;\n  params[ObjecteditingParam.LAYER] = layer;\n  params[ObjecteditingParam.THEME] = this.themeName;\n  params[ObjecteditingParam.PROPERTY] = property;\n\n  const url = MainController.appendParams(this.selectedUrl.url, params);\n  window.open(url);\n};\n\n\n/**\n */\nMainController.prototype.runViewerDev = function() {\n  this.runViewer_(this.viewerUrlDev_);\n};\n\n\n/**\n */\nMainController.prototype.runViewerHosted = function() {\n  this.runViewer_(this.viewerUrlHosted_);\n};\n\n\n/**\n * @param {string} baseUrl Base url of the viewer.\n * @private\n */\nMainController.prototype.runViewer_ = function(baseUrl) {\n\n  const node = this.selectedGmfLayerNode;\n  const nodeId = node.id;\n  const nodeName = node.name;\n  const nodeIdAttrFieldName = node.metadata.identifierAttributeField;\n  console.assert(nodeIdAttrFieldName !== undefined);\n  const ids = [];\n\n  const features = this.featuresCache_[nodeId];\n  for (let i = 0, ii = features.length; i < ii; i++) {\n    ids.push(\n      features[i].get(nodeIdAttrFieldName)\n    );\n  }\n\n  const params = {};\n  params['wfs_layer'] = nodeName;\n  params[`wfs_${nodeIdAttrFieldName}`] = ids.join(',');\n\n  const url = MainController.appendParams(baseUrl, params);\n  window.open(url);\n};\n\n\n/**\n * @param {import('gmf/themes.js').GmfLayerWMS} gmfLayerNode Layer node.\n * @return {angular.IPromise} The promise attached to the deferred object.\n * @private\n */\nMainController.prototype.getFeatures_ = function(gmfLayerNode) {\n\n  this.getFeaturesDeferred_ = this.q_.defer();\n\n  const features = this.getFeaturesFromCache_(gmfLayerNode);\n\n  if (features) {\n    this.getFeaturesDeferred_.resolve();\n  } else {\n    this.issueGetFeatures_(gmfLayerNode);\n  }\n\n  return this.getFeaturesDeferred_.promise;\n};\n\n\n/**\n * @param {import('gmf/themes.js').GmfLayerWMS} gmfLayerNode Layer node.\n * @private\n */\nMainController.prototype.issueGetFeatures_ = function(gmfLayerNode) {\n\n  const id = gmfLayerNode.id;\n\n  const url = MainController.appendParams(\n    this.gmfServer_.urlWfs,\n    {\n      'SERVICE': 'WFS',\n      'REQUEST': 'GetFeature',\n      'VERSION': '1.1.0',\n      'TYPENAME': gmfLayerNode.layers\n    }\n  );\n\n  this.http_.get(url).then((response) => {\n    const features = new olFormatWFS().readFeatures(response.data);\n    this.featuresCache_[id] = features;\n    this.getFeaturesDeferred_.resolve();\n  });\n};\n\n\n/**\n * @param {import('gmf/themes.js').GmfLayerWMS} gmfLayerNode Layer node.\n * @private\n */\nMainController.prototype.handleGetFeatures_ = function(gmfLayerNode) {\n  const features = /** @type Array.<import(\"ol/Feature.js\").default> */ (\n    this.getFeaturesFromCache_(gmfLayerNode));\n  this.features = features;\n  this.selectedFeature = this.features[0];\n};\n\n\n/**\n * @param {import('gmf/themes.js').GmfLayerWMS} gmfLayerNode Layer node.\n * @return {?Array.<import(\"ol/Feature.js\").default>} List of features\n * @private\n */\nMainController.prototype.getFeaturesFromCache_ = function(gmfLayerNode) {\n  const id = gmfLayerNode.id;\n  const features = this.featuresCache_[id] || null;\n  return features;\n};\n\n\n/**\n * @param {import('gmf/themes.js').GmfLayerWMS} gmfLayerNode Layer node.\n * @return {angular.IPromise} The promise attached to the deferred object.\n * @private\n */\nMainController.prototype.getGeometryType_ = function(gmfLayerNode) {\n\n  this.getGeometryTypeDeferred_ = this.q_.defer();\n\n  const geomType = this.getGeometryTypeFromCache_(gmfLayerNode);\n\n  if (geomType) {\n    this.getGeometryTypeDeferred_.resolve();\n  } else {\n    this.issueGetAttributesRequest_(gmfLayerNode);\n  }\n\n  return this.getGeometryTypeDeferred_.promise;\n};\n\n\n/**\n * @param {import('gmf/themes.js').GmfLayerWMS} gmfLayerNode Layer node.\n * @private\n */\nMainController.prototype.issueGetAttributesRequest_ = function(\n  gmfLayerNode\n) {\n\n  this.gmfXSDAttributes_.getAttributes(gmfLayerNode.id).then(\n    function(gmfLayerNode, attributes) {\n      // Get geom type from attributes and set\n      const geomAttr = getGeometryAttribute(attributes);\n      if (geomAttr && geomAttr.geomType) {\n        this.geomTypeCache_[gmfLayerNode.id] = geomAttr.geomType;\n        this.getGeometryTypeDeferred_.resolve();\n      }\n    }.bind(this, gmfLayerNode)\n  );\n\n};\n\n\n/**\n * @param {import('gmf/themes.js').GmfLayerWMS} gmfLayerNode Layer node.\n * @private\n */\nMainController.prototype.handleGetGeometryType_ = function(gmfLayerNode) {\n  const geomType = this.getGeometryTypeFromCache_(gmfLayerNode);\n  this.selectedGeomType = geomType;\n};\n\n\n/**\n * @param {import('gmf/themes.js').GmfLayerWMS} gmfLayerNode Layer node.\n * @return {string|undefined} The type of geometry.\n * @private\n */\nMainController.prototype.getGeometryTypeFromCache_ = function(\n  gmfLayerNode\n) {\n  const id = gmfLayerNode.id;\n  const geomType = this.geomTypeCache_[id];\n  return geomType;\n};\n\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nMainController.appendParams = function(uri, params) {\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach((k) => {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(`${k}=${encodeURIComponent(params[k])}`);\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri = uri.indexOf('?') === -1 ? `${uri}?` : `${uri}&`;\n  return uri + qs;\n};\n\n\nmodule.controller('MainController', MainController);\n\n\nexport default module;\n"],"sourceRoot":""}